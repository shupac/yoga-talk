<section>
  <h2 (click)="editable && selectSeries.emit(props)">{{ props.name }}</h2>

  <div
    dnd-sortable-container
    [sortableData]="sequence"
    [dropZones]="['sequence-dropZone']">
    <div
      *ngFor="let node of sequence, let i = index"
      class="node-container"
      dnd-sortable
      [sortableIndex]="i"
      [dragEnabled]="!dragOperation && editable"
      (onDragStart)="handleDragStart()"
      (onDragEnd)="handleDragEnd()"
      >
      <div [ngSwitch]="node.type">

        <div *ngSwitchCase="'pose'">
          <app-pose
            [pose]="node"
            [currentId]="currentPoseId"
            (click)="editable && selectPose.emit(node)"
            >
          </app-pose>
        </div>

        <div *ngSwitchCase="'series'">
          <app-series
            [node]="node"
            [currentId]="currentPoseId"
            [dragEnabled]="dragOperation && editable"
            (selectPose)="editable && selectPose.emit($event)"
            (selectSeries)="editable && selectSeries.emit(node)"
            (sortStart)="handleDragStart()"
            (sortEnd)="handleDragEnd()"
            >
          </app-series>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="editable">
    <button (click)="dragOperation=!dragOperation">Reorder {{ dragOperation ? 'Sequence' : 'Series' }}</button>
  </div>
</section>


